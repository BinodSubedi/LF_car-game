var W=Object.defineProperty;var k=(i,t,e)=>t in i?W(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var h=(i,t,e)=>(k(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const b of o.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&a(b)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();class _{constructor(t,e,a,r){h(this,"height");h(this,"width");h(this,"myClassName");h(this,"targetClassName");this.height=t,this.width=e,this.myClassName=a,this.targetClassName=r}create(){var e;const t=document.createElement("canvas");return t.classList.add(`.${this.myClassName}`),t.style.height=this.height,t.style.width=this.width,(e=document.querySelector(`.${this.targetClassName}`))==null||e.appendChild(t),t}}class C{constructor(t){h(this,"totalLength");h(this,"width");h(this,"x");h(this,"y");h(this,"color");h(this,"drawLine",t=>{t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.totalLength)});h(this,"updateLine",t=>{t.y<=-10?(t.ctx.clearRect(this.x,this.y,this.width,this.totalLength),this.y=t.resetHeight,this.drawLine(t.ctx)):(t.ctx.clearRect(this.x,this.y,this.width,this.totalLength),this.y=t.y,this.drawLine(t.ctx))});this.totalLength=t.totalLength,this.width=t.width,this.x=t.x,this.y=t.y,this.color=t.color}}class v{constructor(t,e,a,r,o){h(this,"x");h(this,"y");h(this,"height");h(this,"width");h(this,"src");h(this,"image",null);this.x=t,this.y=e,this.height=a,this.width=r,this.src=o}create(t){const e=new Image;this.image=e,e.onload=()=>{t.drawImage(e,this.x,this.y,this.height,this.width)},e.src=this.src}clear(t){t.clearRect(this.x,this.y,this.height,this.width)}reserect(t){t.drawImage(this.image,this.x,this.y,this.height,this.width)}updateElement(t,e,a){a.clearRect(this.x,this.y,this.height,this.width),this.y=e,t!==null&&(this.x=t),this.clear(a),a.drawImage(this.image,t,e,this.height,this.width)}updateElementWithoutClear(t,e,a){this.x=t,this.y=e,a.drawImage(this.image,t,e,this.height,this.width)}}class A extends v{constructor(t,e,a,r,o){super(t,e,a,r,o)}moveLeft(t){this.x!=24&&(this.clear(t),this.updateElementWithoutClear(this.x==128?24:128,this.y,t))}moveRight(t){this.x!=232&&(this.clear(t),this.updateElementWithoutClear(this.x==24?128:232,this.y,t))}}const I=720,D=720,$=new _(`${I}px`,`${D}px`,"canva","app"),y=$.create();y.style.background="black";const s=y.getContext("2d"),l=22,d=10,L=18,M=new C({x:y.width/2-d,y:L,totalLength:l,width:d,color:"white"});M.drawLine(s);const N=new C({x:y.width/2-d,y:l+L*2,totalLength:l,width:d,color:"white"});N.drawLine(s);const O=new C({x:y.width/2-d,y:l*2+L*3,totalLength:l,width:d,color:"white"});O.drawLine(s);const R=new C({x:y.width/2-d,y:l*3+L*4,totalLength:l,width:d,color:"white"});R.drawLine(s);const H=[M,N,O,R],c=new A(128,110,35,35,"./images/main_car.png"),m=new v(24,0,35,35,"./images/car_enemy_1.png"),f=new v(128,0,35,35,"./images/car_enemy_2.png"),w=new v(232,0,35,35,"./images/car_enemy_3.png"),u=[m,f,w];s!=null&&(c.create(s),m.create(s),f.create(s),w.create(s));let p=1,n=[1,0,1];const P=()=>{if(p==1){p=0;const i=Math.floor(Math.random()*2),t=Math.floor(Math.random()*2),e=Math.floor(Math.random()*2);if(n[0]=i,n[1]=t,n[2]=e,i==1&&t==1&&e==1){const a=Math.floor(Math.random()*3);n[a]=0}else if(i==0&&t==0&&e==0){const a=Math.floor(Math.random()*3);n[a]=1}for(let a=0;a<n.length;a++)if(n[a]==1){u[a].y=-30;break}}},E=i=>{i.x==c.x&&i.y>=c.y-(c.height-10)&&(window.alert(`Game Over!!!  score::${x}`),x=0,g=.5,u.forEach(t=>{t.clear(s),t.y=0}),p=1)};let g=.5,x=0;const S=()=>{s!=null&&(c.clear(s),m.clear(s),f.clear(s),w.clear(s),s.font="12px serif",s.fillStyle="white",s.fillText(x.toString(),24,15,30),H.forEach(i=>{i.updateLine({y:i.y-1,ctx:s,resetHeight:l*3+L*5})}),P(),c.reserect(s),n.forEach((i,t)=>{switch(t){case 0:i==1&&(m.updateElementWithoutClear(m.x,m.y+g,s),E(m));break;case 1:i==1&&(f.updateElementWithoutClear(f.x,f.y+g,s),E(f));break;case 2:i==1&&(w.updateElementWithoutClear(w.x,w.y+g,s),E(w));break}if(u[t].y==160){switch(x++,x){case 10:g+=.5;break;case 30:g+=1;break;case 60:g+=1}u[t].clear(s),u[t].y=0,n[t]=0}}),n[0]||n[1]||n[2]||(p=1),requestAnimationFrame(S))};S();window.addEventListener("keydown",i=>{switch(i.key){case"ArrowLeft":console.log("left"),c.moveLeft(s);break;case"ArrowRight":console.log("right"),c.moveRight(s);break}});
